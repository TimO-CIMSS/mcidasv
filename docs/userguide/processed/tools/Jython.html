<html>
<head>
<title>Jython Methods</title>
<link rel="stylesheet" type="text/css" href="../idv.css" title="Style">
</head>
<body>
<a href="Formulas.html"><img src="../images/PreviousArrow.gif" border="0"   alt="Previous: Formulas" title="Previous: Formulas"></a> 
<a href="DerivedData.html"><img src="../images/NextArrow.gif" border="0"   alt="Next: Derived Data" title="Next: Derived Data"></a> 
    <a href="../toc.html#index.html"><img src="../images/TOCIcon.gif" border="0"   alt="Table of contents" title="Table of contents"></a>   
<a href="../imageindex.html"><img src="../images/Images.gif" border="0"   alt="Images" title="Images"></a>
<a href="../frames.html" target="_top"><img src="../images/Frames.gif" border="0"   alt="Frames" title="Frames"></a>
<span class="breadcrumb"><a href="../index.html">McIDAS-V User's Guide</a> &gt; <a href="../page_miscellaneous.html">Miscellaneous</a> &gt; <a href="../page_dataanalysis.html">Data Analysis</a> </span> <br>
<img src="../images/blueline.gif">
<div class="pagetitle">7.3.1 Jython Methods</div>
First read about <a href="Formulas.html">McIDAS-V Formulas</a>.
<p> McIDAS-V analysis calculations use the Jython computer language. Jython is
  the Python language, implemented in Java. The Jython user sees regular Python
  and no Java. You do not need to know Java to use Jython. Jython and Python
  have a simple syntax but this is a powerful computer language that can do most
  everything FORTRAN, C++, and Java can do.</p>
<p> Jython (Python) is designed to be easy and intuitive, as far as possible.
  Jython is as easy to write as FORTRAN, and easier than Java or C++. If you
  have existing FORTRAN code, conversion may be straightforward, with line by
  line revisions. In McIDAS-V you can use any normal built-in Python (Jython)
  operator, such as +, -, / *, and ** for power, or numeric functions, such as
  abs, round, pow, or sqrt.</p>
<p> McIDAS-V uses Jython for computations for three reasons. One is that Jython
  can call Java code so there can be full integration between Jython methods
  and internal code in McIDAS-V (you can see examples in the Jython library described
  below). Another reason is that McIDAS-V uses VisAD software to store and manage
  data, and VisAD software is written in Java. VisAD code also can be called
  directly by Jython. To work with data in McIDAS-V you use VisAD. And finally,
  because Jython is as easy to use as any computer language, and you can do simple
  things simply.</p>
<p> You do not need to study Jython/Python to use VisAD formulas. To learn more
  about Jython and Python, we recommend these books</p>
<ul>
  <i>The Quick Python Book</i> by Daryl Harms, Manning. <br>
  <i>Jython for Java Programmers</i> by Robert Bill, New Riders. <br>
  <i>Python Essential Reference 2nd edition</i> by David Beazley, New Riders. <br>
  <i>Python Developers Handbook</i> by Andre Lessa, Sams Publishing.
</ul>
and web sites: <br>
<a href="http://www.python.org">http://www.python.org</a>, <BR>
<a href="http://www.jython.org">http://www.jython.org</a>, <BR>
<a href="http://www.ssec.wisc.edu/~tomw/visadtutor/">Using Python with VisAD</a> (
http://www.ssec.wisc.edu/~tomw/visadtutor/ ). <br>
Refer to one of these books or web sites for how to write Jython.
<div class="pagesubtitle">VisAD and McIDAS-V</div>
McIDAS-V uses and supports <a href="http://www.ssec.wisc.edu/~billh/visad.html"><b>VisAD</b></a>,
a Java library to provide display and analysis code for multi-dimensional data.
All data objects used by McIDAS-V are actually, invisibly to the user, stored
in VisAD data objects, which carry with them information about units, errors,
navigation or coordinate systems and transformations, and other metadata.
<p> VisAD includes a package of code, visad.python.JPythonMethods, to allow Jython
  calls to operate on VisAD data objects, such as 3D grids.</p>
<p> You may use McIDAS-V and its computation features without knowing anything
  about VisAD. However to do more you will want to see the documents for visad.python.JPythonMethods
  at <b>http://www.ssec.wisc.edu/~dglo/visad/ </b>. In your web browser, in the
  upper left box in this page, scroll down to visad.python and click on it. In
  the lower left box click on JPythonMethods.</p>
<div class="pagesubtitle">Different data sources and automatic navigation</div>
McIDAS-V does a lot of computational help for you. An McIDAS-V formula or Jython
method can be applied, without alteration, to a single value, to data from a
vertical sounding or a balloon track, or to different 2D or 3D grids. All you
need is one line of code.
<P> You can write a simple formula such as (CT*1.8 + 32.0) - dewptF and McIDAS-V
  automatically applies the calculation to every element in large 3D grids referred
  to as CT and dewptF. No loops over grid points are needed; and you don't even
  need to know anything about how the grid is defined, mapped on the Earth, or
  the data format. You can even use different sources for the individual parameters,
  for example, CT can come from an Eta model output grid and dewptF from your
  own local weather model. The two grids need hot have the same grid point locations
  nor the same areal coverage. The results are computed in the area of overlap,
  on the grid points locations of the first grid. Interpolation is automatically
  applied where needed.</p>
<div class="pagesubtitle">Defining your own Library of Jython Methods</div>
McIDAS-V knows how to run Jython, and can use special Jython methods to operate
on VisAD data objects. But you can't type much in the single entry line in the
McIDAS-V formula editor.
<p> McIDAS-V allows you to write your own methods, in Jython, of any length.
  Then you can call these methods in an McIDAS-V formula. Here is an example
  how to do it.</p>
<p> From the main menu bar, select the <code class="menu">Edit-&gt;Formulas-&gt;Jython
    Library</code> menu item. This brings up the brings up the Jython Library
    Editor:</p>
<div class="cimg"><img  src="images/JythonLibraryEditor.gif"  alt="images/JythonLibraryEditor.gif" ></div>
The Jython Library window has two or more panes selected by tabs at the top. &quot;resources/default.py&quot; is
the user library of Jython methods you have created in this editor pane and saved. &quot;DefaultIdv/default.py&quot; is
Jython methods supplied with McIDAS-V that you can call in your methods or formulas.
You cannot edit these McIDAS-V methods, but you can use the source code to see
how things are done, and your formulas and methods can call the methods in the
McIDAS-V method library.
<p> The user pane is an editor window that uses simple mouse actions to move
  the insertion point and mark areas for cut and paste. Drag the mouse to highlight;
  use the delete or backspace key to remove highlighted text.</p>
<p> The simple wind chill method in the figure below illustrates some basics
  of writing a Jython method. A Jython method starts with the word <b>def</b>.
  The first line includes the method name and argument list, and <b>ends with
  a colon &quot;:&quot;</b>. Method names are, by convention, descriptive with each first
  letter of a word in upper case, except the first letter is lower case. Underscores
  are not used. Using this convention means others can use your code with less
  trouble. Do not omit the final colon or it will not be correct Jython.</p>
<p> Documentation, which is optional but highly recommended, is enclosed in sets
  of triple quotes beginning in the first line after &quot;def.&quot; with first line setting
  the indent level for the method. Comment lines begin with #, located anywhere.</p>
<p> Code blocks correspond to the same level of indentation, such as the code
  block in these methods. Indentation in a method can be any number of spaces
  but all must the the same or the code will not execute. There is no extra end-of-line
  character. There is no declaration of new variables, you simply use them when
  needed and the type of data is deduced by Jython from the context.</p>
<p> Indentation must be correct in a Python program or it will not run, or it
  will fail to run correctly. How many spaces you use for a code block indent
  is up to you, but must be one or more.</p>
<p> The Jython Library Editor automatically imports the methods in visad.python.JPythonMethods.
  You can use them simply by typing the method names in your methods.</p>
<p> Click on <b>Save</b>. The code you entered is checked for valid Jython syntax;
  If there is an error, a pop-up window will appear with the message <b>An exception
  has occurred writing in Jython library</b>. The actual error will also be printed
  in the console window running McIDAS-V. Correct the error and try to save again.
  The usual cause for errors is typing mistakes, irregular code indents, or missing
  colons where needed. <b>OK</b> saves the library and exits the editor window.</p>
<p> In this example the arguments and results could be single values, multidimensional
  arrays, or any other data object supported by McIDAS-V and VisAD, depending
  on the type of the incoming data.</p>
<p> This simple method is so short it would have been easier to simply type it
  as a one line formula. There is no limit on on long your methods can be. And
  any method can be called by other methods in the library, or by any formula,
  so commonly used code should be put in the Jython library. It is easier to
  add a new Jython method than to write an McIDAS-V formula. Put the complexity
  in methods and keep the formulas simple.</p>
<div class="pagesubtitle">Using Jython Methods in Formulas</div>
When writing your formulas you can use any method you created in your Jython
library. Simply type the method name in the formula, with appropriate dummy arguments,
if any. For example a formula might be the text &quot;convertCToF(atemp)&quot;. Selecting
the formula for display, you merely need then to select which parameter from
a data source to use for &quot;atemp&quot; for that display.
<p> You can cut and paste from the Jython Library Editor to the formula editor.
  Keeping the Jython Library Editor open while creating formulas is handy.</p>
<p> Check out the methods in the McIDAS-V Jython library to see if they are of
  use to you. These methods also show some examples of calling McIDAS-V internal
  code.</p>
<div class="pagesubtitle">The Complete McIDAS-V Analysis Facility</div>
With the Formula editor, Jython methods of any length composed in the Jython
Library Editor, and the ability to call Jython methods in formulas, you can create
very complex data analysis expressions.
<div  class="childlist" > </div>
<p></p>
<img src="../images/blueline.gif"> <br>
  <a href="Formulas.html"><img src="../images/PreviousArrow.gif" border="0"   alt="Previous: Formulas" title="Previous: Formulas"></a> 
  <a href="DerivedData.html"><img src="../images/NextArrow.gif" border="0"   alt="Next: Derived Data" title="Next: Derived Data"></a> 
      <a href="../toc.html#index.html"><img src="../images/TOCIcon.gif" border="0"   alt="Table of contents" title="Table of contents"></a>   
<a href="../imageindex.html"><img src="../images/Images.gif" border="0"   alt="Images" title="Images"></a>
<a href="../frames.html" target="_top"><img src="../images/Frames.gif" border="0"   alt="Frames" title="Frames"></a>
  <span class="breadcrumb"><a href="../index.html">McIDAS-V User's Guide</a> &gt; <a href="../page_miscellaneous.html">Miscellaneous</a> &gt; <a href="../page_dataanalysis.html">Data Analysis</a> </span>
</body>
</html>
